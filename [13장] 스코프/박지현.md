## 스코프
스코프라는 개념이 없다면 프로그램에서 변수의 이름은 유일해진다. 이러면 너무 변수를 만들 때 너무 힘들어진다.
모든 식별자는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다.
이를 스코프라고 한다.
자바스크립트 엔진은 코드를 실행할 때 코드의 문맥을 고려한다. 
예를 들어 같은 두개의 변수가 있다면 스코프를 통해 어떤 변수를 참조할 지 결정한다.

### 스코프의 종류
코드는 전역(global)과 지역(local)이 있다.
전역은 전역 스코프 지역은 지역 스코프이다.
전역 변수는 어디서든지 참조할 수 있다.

### 스코프 체인
전역변수 x 지역변수 x가 있다면 현재 지역 스코프 라면 스코프 체인을 통해 지역변수 x를 참조한다.
스코프 체인은 스코프가 계층적으로 연결된 것이다.
물리적인 실체로 존재한다. 
![image](https://github.com/user-attachments/assets/37eff91b-a713-4ee9-9cb9-18b30b6de999)
이 이미지를 보면 상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조할 수 있지만
하위 스코프에서 유효한 변수를 상위 스코프에서 참조할 수 없다.

### 함수레벨스코프
javascript에서 var는 함수 몸체만을 지역 스코프로 인정한다. if, for, while등을 지역 스코프로 인정하지 않는다.
ES6부터 const, let은 블록 레벨 스코프를 지원해서 var를 안쓰는게 이로워 보인다.

### 렉시컬 스코프
함수를 어디서 호출했는 지에 따라 상위 스코프를 결정하는 동적 스코프가 있다.
함수를 어디서 정의했는지에 따라 함수의 상위 스코프를 결정하는 렉시컬 스코프가 있다.
자바스크립트는 렉시컬 스코프를 따르므로 함수를 어디서 정의했는지에 따라 상위 스코프를 결정한다. 
즉, 함수의 상위 스코프는 언제나 자신이 정의된 스코프다.
그래서 bar 함수 객체는 자신이 정의된 스코프, 즉 전역 스코프를 기억해서 1 1 이 foo()는 1이 출력된다.

```javascript
  var x = 1;
  function foo() { var x = 10; bar();}
  function bar() { console.log(x); }
  foo(); // 1
  bar(); // 1
```
